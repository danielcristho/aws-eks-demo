hub:
  shutdownOnLogout: true

  db:
    url: "sqlite:////srv/jupyterhub/jupyterhub.sqlite"

  config:
    Authenticator:
      admin_users:
        - admin
    JupyterHub:
      authenticator_class: nativeauthenticator.NativeAuthenticator
    NativeAuthenticator:
      open_signup: true
      password_length_min: 6
      ask_email_on_signup: false
      allow_2fa: false

persistence:
  enabled: true
  storageClass: gp3
  size: 1Gi 
  
proxy:
  service:
    annotations:
      service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: ip
      service.beta.kubernetes.io/aws-load-balancer-scheme: internal
      service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled: "true"
      service.beta.kubernetes.io/aws-load-balancer-ip-address-type: ipv4

singleuser:
  startTimeout: 1200
  image:
    name: quay.io/jupyter/pytorch-notebook
    tag: cuda12-python-3.11.8
  cmd:
    - start-singleuser.sh
  defaultUrl: "/lab"
  cpu:
    guarantee: 1
    limit: 2
  memory:
    guarantee: 4G
    limit: 8G
  extraEnv:
    GRANT_SUDO: "yes"
    NOTEBOOK_ARGS: "--allow-root"
  storage:
    dynamic:
      storageClass: gp3
    extraVolumes:
      - name: notebook
        configMap:
          name: notebook
    extraVolumeMounts:
      - name: notebook
        mountPath: /home/jovyan/notebooks
  allowPrivilegeEscalation: true
  serviceAccountName: ${jupyter_single_user_sa_name}

prePuller:
  hook:
    enabled: false
  continuous:
    enabled: false

scheduling:
  userScheduler:
    enabled: false
  podPriority:
    enabled: true
  userPlaceholder:
    enabled: false
  userPods:
    nodeAffinity:
      matchNodePurpose: prefer